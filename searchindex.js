Search.setIndex({"docnames": ["examples/twiss", "index", "modules/convert", "modules/distribution", "modules/invariant", "modules/matrix", "modules/normal", "modules/transport", "modules/util", "modules/wolski"], "filenames": ["examples/twiss.ipynb", "index.rst", "modules/convert.rst", "modules/distribution.rst", "modules/invariant.rst", "modules/matrix.rst", "modules/normal.rst", "modules/transport.rst", "modules/util.rst", "modules/wolski.rst"], "titles": ["Example-01: Coupled twiss parameters", "Welcome to twiss\u2019s documentation!", "Convert", "Distribution", "Invariant", "Matrix", "Normal", "Transport", "Math", "Wolski"], "terms": {"1": [0, 2, 3, 4, 5, 6, 7, 8, 9], "import": [0, 2, 3, 4, 5, 6, 7, 8, 9], "torch": [0, 2, 3, 4, 5, 6, 7, 9], "set_printopt": 0, "precis": 0, "3": [0, 9], "sci_mod": 0, "true": [0, 2, 3, 4, 5, 6, 7, 9], "2": [0, 2, 3, 4, 5, 6, 7, 8, 9], "set": 0, "element": [0, 6], "def": [0, 9], "drif": 0, "x": [0, 4, 6, 7, 8], "l": 0, "qx": 0, "px": 0, "qy": 0, "py": 0, "return": [0, 2, 3, 4, 5, 6, 7, 8, 9], "stack": [0, 7, 9], "quad": 0, "kn": 0, "k": [0, 9], "n": [0, 2, 3, 4, 5, 6, 9], "25": 0, "0": [0, 2, 3, 4, 5, 6, 7, 8, 9], "_": [0, 3, 7, 9], "rang": 0, "transport": [0, 1, 9], "map": [0, 9], "m11": 0, "kn1": 0, "ks1": 0, "kn2": 0, "ks2": 0, "m12": 0, "5": [0, 3, 8], "m23": 0, "m34": 0, "m45": 0, "m56": 0, "m67": 0, "m78": 0, "m89": 0, "4": [0, 3, 8], "fodo": 0, "cell": 0, "comput": [0, 1, 4, 5, 6, 7, 9], "one": [0, 6, 9], "turn": [0, 4, 6, 9], "matrix": [0, 1, 2, 3, 4, 6, 7, 9], "tensor": [0, 2, 3, 4, 5, 6, 7, 9], "dtype": [0, 2, 4, 5, 6, 7, 9], "float64": [0, 2, 4, 5, 6, 7, 9], "20": 0, "m": [0, 2, 3, 4, 5, 6, 7, 9], "func": [0, 4, 7, 9], "jacrev": 0, "print": 0, "is_stabl": [0, 1, 9], "946e": 0, "032e": 0, "8": [0, 3], "454e": 0, "297e": 0, "725e": 0, "386e": 0, "052e": 0, "9": [0, 9], "236e": 0, "539e": 0, "00": [0, 5], "806e": 0, "6": [0, 3], "t": [0, 2, 3, 4, 6, 7, 9], "w": [0, 2, 3, 4, 6, 9], "677e": 0, "647e": 0, "835e": 0, "000e": 0, "714e": 0, "788e": 0, "16": [0, 5], "407e": 0, "17": 0, "069e": 0, "135e": 0, "18": 0, "7": 0, "283e": 0, "634e": 0, "851e": 0, "884e": 0, "459e": 0, "980e": 0, "841e": 0, "308e": 0, "338e": 0, "208e": 0, "055e": 0, "279e": 0, "706e": 0, "165e": 0, "401e": 0, "083e": 0, "880e": 0, "367e": 0, "197e": 0, "114e": 0, "430e": 0, "305e": 0, "156e": 0, "866e": 0, "550e": 0, "469e": 0, "818e": 0, "check": [0, 9], "normal": [0, 1, 3, 4, 7, 9], "math": [0, 1, 2, 3, 4, 5, 6, 7, 9], "pi": [0, 2, 3, 4, 5, 6, 7, 8, 9], "rotat": [0, 1, 2, 3, 4, 5, 6, 7, 9], "invers": [0, 3, 5, 9], "945e": 0, "692e": 0, "224e": 0, "957e": 0, "585e": 0, "551e": 0, "179e": 0, "221e": 0, "636e": 0, "741e": 0, "133e": 0, "888e": 0, "matric": [0, 1, 2, 3, 6, 7, 9], "symplectic_ident": [0, 1, 5], "": [0, 9], "len": 0, "u": [0, 2, 4, 6], "zeros_lik": [0, 9], "ti": 0, "wi": 0, "zip": [0, 7], "sin": [0, 5, 9], "co": [0, 5, 9], "each": [0, 4], "locat": [0, 7], "propag": [0, 1, 7, 9], "out": 0, "append": 0, "shape": [0, 9], "size": 0, "10": [0, 3], "convert": [0, 1, 4, 7], "c": [0, 2, 4, 6, 7], "lb": [0, 2, 4, 6, 7], "represenc": 0, "wolski_to_c": [0, 1, 2, 4, 7], "wolski_to_lb": [0, 1, 2, 4, 7], "ax": [0, 2, 4, 6], "bx": [0, 2, 4, 6], "ai": [0, 2, 4, 6], "vmap": [0, 4, 7, 9], "a1x": [0, 2, 4, 6], "b1x": [0, 2, 4, 6], "a2x": [0, 2, 4, 6], "b2x": [0, 2, 4, 6], "a1i": [0, 2, 4, 6], "b1y": [0, 2, 4, 6], "a2i": [0, 2, 4, 6], "b2y": [0, 2, 4, 6], "11": 0, "plot": 0, "plane": [0, 2, 5, 6, 9], "matplotlib": 0, "pyplot": 0, "plt": 0, "figur": 0, "figsiz": 0, "marker": 0, "o": [0, 9], "color": 0, "blue": 0, "red": 0, "show": 0, "12": [0, 2, 3, 4, 5, 6, 7, 9], "13": 0, "mu": [0, 9], "sum": 0, "14": 0, "accumul": 0, "mux": 0, "mui": 0, "cumsum": 0, "fn": [0, 9], "d1": 0, "d2": 0, "832e": 0, "027e": 0, "894e": 0, "265e": 0, "186e": 0, "682e": 0, "547e": 0, "998e": 0, "576e": 0, "716e": 0, "931e": 0, "011e": 0, "286e": 0, "test": [0, 5], "dk": 0, "005": 0, "674e": 0, "645e": 0, "740e": 0, "702e": 0, "703e": 0, "task": 0, "function": [0, 9], "341e": 0, "226e": 0, "274e": 0, "608e": 0, "173e": 0, "554e": 0, "444e": 0, "723e": 0, "834e": 0, "303e": 0, "188e": 0, "232e": 0, "251e": 0, "827e": 0, "395e": 0, "370e": 0, "856e": 0, "190e": 0, "234e": 0, "262e": 0, "838e": 0, "396e": 0, "648e": 0, "373e": 0, "742e": 0, "857e": 0, "172e": 0, "490e": 0, "759e": 0, "918e": 0, "375e": 0, "567e": 0, "088e": 0, "784e": 0, "528e": 0, "883e": 0, "357e": 0, "435e": 0, "691e": 0, "086e": 0, "752e": 0, "206e": 0, "527e": 0, "368e": 0, "438e": 0, "694e": 0, "085e": 0, "751e": 0, "grad": 0, "given": [0, 4, 5, 6, 7, 9], "known": 0, "knob": 0, "uncertanti": 0, "sk": 0, "st": 0, "sqrt": [0, 9], "randn": 0, "1024": 0, "std": 0, "900e": 0, "940e": 0, "358e": 0, "object": 0, "focus": 0, "quadrupol": 0, "center": 0, "BY": 0, "bag": 0, "flag": 0, "fals": [0, 9], "optim": 0, "adam": 0, "count": 0, "lr": 0, "beta": 0, "900": 0, "999": 0, "epsilon": [0, 2, 5, 6, 9], "0e": [0, 2, 3, 6, 9], "b1": 0, "b2": 0, "history_knob": 0, "history_valu": 0, "m1": 0, "m2": 0, "i": [0, 4, 5, 6, 8, 9], "f1": 0, "f2": 0, "valu": 0, "tupl": [0, 7, 9], "128": 0, "001": 0, "bys": 0, "cpu": [0, 5], "numpi": 0, "defin": 0, "class": 0, "nn": 0, "modul": [0, 1], "__init__": 0, "self": 0, "super": 0, "clone": 0, "forward": 0, "train": 0, "note": 0, "here": 0, "method": [0, 3], "loss": 0, "256": 0, "backward": 0, "step": 0, "zero_grad": 0, "result": 0, "detach": 0, "squeez": 0, "500e": 0, "parametr": [0, 1, 6], "ndmap": 0, "evalu": 0, "lambda": [0, 4], "jacobian": 0, "jacfwd": [0, 9], "mse": 0, "mseloss": 0, "data": [0, 5, 7], "item": 0, "black": 0, "wolski": [0, 1, 2, 3, 4, 6, 7], "443e": 0, "933e": 0, "129e": 0, "072e": 0, "789e": 0, "458e": 0, "911e": 0, "017e": 0, "216e": 0, "310e": 0, "167e": 0, "gener": [0, 3, 5, 6, 7], "beam": 0, "multivariate_norm": [0, 3], "multivariatenorm": [0, 3], "ex": [0, 3], "ei": [0, 3], "wx": [0, 3], "wy": [0, 3], "mean": [0, 3], "zero": [0, 3], "covariance_matrix": [0, 3], "sampl": [0, 3], "cov": [0, 3], "241e": 0, "924e": 0, "709e": 0, "030e": 0, "656e": 0, "045e": 0, "639e": 0, "223e": 0, "246e": 0, "874e": 0, "269e": 0, "726e": 0, "022e": 0, "830e": 0, "217e": 0, "078e": 0, "673e": 0, "same": 0, "bd": 0, "215e": 0, "895e": 0, "329e": 0, "699e": 0, "991e": 0, "185e": 0, "650e": 0, "transform": 0, "covari": 0, "209e": 0, "227e": 0, "863e": 0, "293e": 0, "968e": 0, "182e": 0, "077e": 0, "prepar": 0, "frame": 0, "panda": 0, "df": 0, "datafram": 0, "column": 0, "005472": 0, "000417": 0, "000104": 0, "000064": 0, "002620": 0, "000006": 0, "000144": 0, "000058": 0, "006187": 0, "000686": 0, "000392": 0, "000012": 0, "004921": 0, "000598": 0, "000285": 0, "000008": 0, "000305": 0, "000059": 0, "000060": 0, "000067": 0, "65531": 0, "004505": 0, "000694": 0, "000119": 0, "000035": 0, "65532": 0, "006830": 0, "000085": 0, "65533": 0, "006022": 0, "000519": 0, "000034": 0, "000057": 0, "65534": 0, "004400": 0, "000133": 0, "000101": 0, "000076": 0, "65535": 0, "001186": 0, "000023": 0, "000396": 0, "000022": 0, "65536": 0, "row": 0, "seaborn": 0, "sn": 0, "set_styl": 0, "darkgrid": 0, "pairplot": 0, "kind": 0, "kde": 0, "coupl": [1, 9], "paramet": [1, 2, 3, 4, 5, 6, 7, 8, 9], "arbitrari": [1, 9], "even": [1, 4, 5, 6, 7, 9], "dimens": [1, 4, 5, 6, 7, 9], "01": 1, "02": 1, "tune": [1, 6, 9], "deriv": 1, "03": 1, "04": 1, "phase": [1, 7, 9], "advanc": [1, 7, 9], "05": 1, "uncertainti": 1, "from": [1, 2, 3, 4, 5, 6, 7, 8, 9], "systemat": 1, "error": 1, "06": 1, "match": [1, 3], "compos": 1, "07": 1, "autograd": 1, "08": 1, "taylor": 1, "model": 1, "09": 1, "distribut": 1, "mod": [1, 8, 9], "is_symplect": [1, 5, 6], "project": [1, 5], "rotation_block": [1, 5], "symplectic_block": [1, 5], "symplectic_invers": [1, 5], "symplectifi": [1, 5], "cs_normal": [1, 3, 6], "lb_normal": [1, 6], "normal_to_wolski": [1, 6, 7], "wolski_to_norm": [1, 6], "cs_to_wolski": [1, 2], "lb_to_wolski": [1, 2], "invari": 1, "cs_invari": [1, 4], "lb_invari": [1, 4], "cs_transport": [1, 7], "lb_transport": [1, 7], "momenta": [1, 7], "wolski_transport": [1, 7], "index": 1, "search": 1, "page": 1, "between": [2, 7], "differ": 2, "twiss": [2, 3, 4, 5, 6, 7, 8, 9], "represent": 2, "par": [2, 6], "sourc": [2, 3, 4, 5, 6, 7, 8, 9], "courant": [2, 6], "snyder": [2, 6], "float": [2, 5, 6, 9], "option": [2, 6], "default": [2, 5, 6, 8, 9], "toler": [2, 5, 6, 9], "type": [2, 3, 4, 5, 6, 7, 8, 9], "ar": [2, 5, 6, 9], "exampl": [2, 3, 4, 5, 6, 7, 8, 9], "19": 2, "allclos": [2, 3, 4, 6, 7, 9], "lebedev": [2, 6], "bogacz": [2, 6], "v1": [2, 4, 6], "v2": [2, 4, 6], "util": [3, 4, 5, 6, 7, 8], "emitt": 3, "creat": 3, "multivari": 3, "vector": 3, "us": [3, 5, 6, 7], "21": 3, "e": [3, 5], "db": 3, "22": 3, "orbit": 4, "linear": 4, "jx": 4, "jy": 4, "assum": [4, 9], "have": [4, 8, 9], "form": 4, "qx_i": 4, "px_i": 4, "qy_i": 4, "py_i": 4, "31": [4, 7], "symplect": [4, 5, 6, 7, 9], "1e": [5, 6, 9], "bool": [5, 9], "condit": [5, 6], "input": [5, 8, 9], "elementwis": 5, "d": 5, "int": [5, 8], "p": 5, "devic": 5, "total": 5, "number": 5, "id": 5, "angl": 5, "block": [5, 9], "0000e": 5, "2246e": 5, "2d": 5, "output": [5, 9], "ident": 5, "configur": 5, "space": 5, "posit": [5, 7], "canon": 5, "variabl": 5, "group": 5, "pair": 5, "0000": [5, 7, 9], "1000": [5, 7, 9], "perform": 5, "symplectif": 5, "99": 5, "0050": 5, "1005": 5, "9950": 5, "r": [6, 9], "88": [6, 9], "4x4": 6, "free": 6, "n11": 6, "n33": 6, "n21": 6, "n43": 6, "n13": 6, "n31": 6, "n14": 6, "n41": 6, "denot": 6, "For": 6, "all": [6, 7, 8], "singular": 6, "uncoupl": 6, "limit": 6, "fake": 6, "fix": 6, "pars1": 7, "pars2": 7, "mu12": 7, "1st": 7, "2nd": 7, "block_diag": 7, "n1": [7, 9], "w1": 7, "n2": [7, 9], "w2": 7, "t_c": 7, "t_lb": 7, "qx1": 7, "qx2": 7, "qy1": 7, "qy2": 7, "coordin": 7, "y": [7, 8], "px1": 7, "px2": 7, "py1": 7, "py2": 7, "x1": 7, "x2": 7, "ani": 8, "z": 8, "remaind": 8, "divis": 8, "offset": 8, "numer": 8, "denomen": 8, "onli": 8, "argument": 8, "5707963267948966": 8, "71238898038469": 8, "standard": 9, "gaug": 9, "stabl": 9, "can": 9, "main": 9, "over": 9, "batch": 9, "differenti": 9, "final": 9, "stabil": 9, "eigenvalu": 9, "unit": 9, "circl": 9, "1234": 9, "throught": 9, "w_i": 9, "0100": 9, "fraction": 9, "alpha": 9, "complex": 9, "1j": 9, "order": 9, "t_i": 9, "8800": 9, "linspac": 9, "2000": 9, "3000": 9, "4000": 9, "5000": 9, "6000": 9, "7000": 9, "8000": 9, "9000": 9, "ones_lik": 9, "reshap": 9, "0796": 9}, "objects": {"twiss": [[2, 0, 0, "-", "convert"], [3, 0, 0, "-", "distribution"], [4, 0, 0, "-", "invariant"], [5, 0, 0, "-", "matrix"], [6, 0, 0, "-", "normal"], [7, 0, 0, "-", "transport"], [8, 0, 0, "-", "util"], [9, 0, 0, "-", "wolski"]], "twiss.convert": [[2, 1, 1, "", "cs_to_wolski"], [2, 1, 1, "", "lb_to_wolski"], [2, 1, 1, "", "wolski_to_cs"], [2, 1, 1, "", "wolski_to_lb"]], "twiss.distribution": [[3, 1, 1, "", "normal"]], "twiss.invariant": [[4, 1, 1, "", "cs_invariant"], [4, 1, 1, "", "invariant"], [4, 1, 1, "", "lb_invariant"]], "twiss.matrix": [[5, 1, 1, "", "is_symplectic"], [5, 1, 1, "", "projection"], [5, 1, 1, "", "rotation"], [5, 1, 1, "", "rotation_block"], [5, 1, 1, "", "symplectic_block"], [5, 1, 1, "", "symplectic_identity"], [5, 1, 1, "", "symplectic_inverse"], [5, 1, 1, "", "symplectify"]], "twiss.normal": [[6, 1, 1, "", "cs_normal"], [6, 1, 1, "", "lb_normal"], [6, 1, 1, "", "normal_to_wolski"], [6, 1, 1, "", "parametric"], [6, 1, 1, "", "wolski_to_normal"]], "twiss.transport": [[7, 1, 1, "", "cs_transport"], [7, 1, 1, "", "lb_transport"], [7, 1, 1, "", "momenta"], [7, 1, 1, "", "transport"], [7, 1, 1, "", "wolski_transport"]], "twiss.util": [[8, 1, 1, "", "mod"]], "twiss.wolski": [[9, 1, 1, "", "advance"], [9, 1, 1, "", "is_stable"], [9, 1, 1, "", "propagate"], [9, 1, 1, "", "twiss"]]}, "objtypes": {"0": "py:module", "1": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"]}, "titleterms": {"exampl": [0, 1], "01": 0, "coupl": 0, "twiss": [0, 1], "paramet": 0, "02": 0, "tune": 0, "deriv": 0, "03": 0, "04": 0, "phase": 0, "advanc": 0, "05": 0, "uncertainti": 0, "from": 0, "systemat": 0, "error": 0, "06": 0, "match": 0, "compos": 0, "07": 0, "autograd": 0, "08": 0, "taylor": 0, "model": 0, "09": 0, "distribut": [0, 3], "welcom": 1, "": 1, "document": 1, "api": 1, "indic": 1, "tabl": 1, "convert": 2, "invari": 4, "matrix": 5, "normal": 6, "transport": 7, "math": 8, "wolski": 9}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.todo": 2, "sphinx.ext.viewcode": 1, "nbsphinx": 4, "sphinx": 60}, "alltitles": {"Example-01: Coupled twiss parameters": [[0, "Example-01:-Coupled-twiss-parameters"]], "Example-02: Tune derivatives": [[0, "Example-02:-Tune-derivatives"]], "Example-03: Twiss derivatives": [[0, "Example-03:-Twiss-derivatives"]], "Example-04: Phase advance derivatives": [[0, "Example-04:-Phase-advance-derivatives"]], "Example-05: Tune uncertainty from systematic errors": [[0, "Example-05:-Tune-uncertainty-from-systematic-errors"]], "Example-06: Matching (composable)": [[0, "Example-06:-Matching-(composable)"]], "Example-07: Matching (autograd)": [[0, "Example-07:-Matching-(autograd)"]], "Example-08: Matching (autograd & taylor model)": [[0, "Example-08:-Matching-(autograd-&-taylor-model)"]], "Example-09: Matched distribution": [[0, "Example-09:-Matched-distribution"]], "Welcome to twiss\u2019s documentation!": [[1, "welcome-to-twiss-s-documentation"]], "Examples:": [[1, null]], "API:": [[1, null]], "Indices and tables": [[1, "indices-and-tables"]], "Convert": [[2, "convert"]], "Distribution": [[3, "distribution"]], "Invariant": [[4, "invariant"]], "Matrix": [[5, "matrix"]], "Normal": [[6, "normal"]], "Transport": [[7, "transport"]], "Math": [[8, "math"]], "Wolski": [[9, "wolski"]]}, "indexentries": {"cs_to_wolski() (in module twiss.convert)": [[2, "twiss.convert.cs_to_wolski"]], "lb_to_wolski() (in module twiss.convert)": [[2, "twiss.convert.lb_to_wolski"]], "module": [[2, "module-twiss.convert"], [3, "module-twiss.distribution"], [4, "module-twiss.invariant"], [5, "module-twiss.matrix"], [6, "module-twiss.normal"], [7, "module-twiss.transport"], [8, "module-twiss.util"], [9, "module-twiss.wolski"]], "twiss.convert": [[2, "module-twiss.convert"]], "wolski_to_cs() (in module twiss.convert)": [[2, "twiss.convert.wolski_to_cs"]], "wolski_to_lb() (in module twiss.convert)": [[2, "twiss.convert.wolski_to_lb"]], "normal() (in module twiss.distribution)": [[3, "twiss.distribution.normal"]], "twiss.distribution": [[3, "module-twiss.distribution"]], "cs_invariant() (in module twiss.invariant)": [[4, "twiss.invariant.cs_invariant"]], "invariant() (in module twiss.invariant)": [[4, "twiss.invariant.invariant"]], "lb_invariant() (in module twiss.invariant)": [[4, "twiss.invariant.lb_invariant"]], "twiss.invariant": [[4, "module-twiss.invariant"]], "is_symplectic() (in module twiss.matrix)": [[5, "twiss.matrix.is_symplectic"]], "projection() (in module twiss.matrix)": [[5, "twiss.matrix.projection"]], "rotation() (in module twiss.matrix)": [[5, "twiss.matrix.rotation"]], "rotation_block() (in module twiss.matrix)": [[5, "twiss.matrix.rotation_block"]], "symplectic_block() (in module twiss.matrix)": [[5, "twiss.matrix.symplectic_block"]], "symplectic_identity() (in module twiss.matrix)": [[5, "twiss.matrix.symplectic_identity"]], "symplectic_inverse() (in module twiss.matrix)": [[5, "twiss.matrix.symplectic_inverse"]], "symplectify() (in module twiss.matrix)": [[5, "twiss.matrix.symplectify"]], "twiss.matrix": [[5, "module-twiss.matrix"]], "cs_normal() (in module twiss.normal)": [[6, "twiss.normal.cs_normal"]], "lb_normal() (in module twiss.normal)": [[6, "twiss.normal.lb_normal"]], "normal_to_wolski() (in module twiss.normal)": [[6, "twiss.normal.normal_to_wolski"]], "parametric() (in module twiss.normal)": [[6, "twiss.normal.parametric"]], "twiss.normal": [[6, "module-twiss.normal"]], "wolski_to_normal() (in module twiss.normal)": [[6, "twiss.normal.wolski_to_normal"]], "cs_transport() (in module twiss.transport)": [[7, "twiss.transport.cs_transport"]], "lb_transport() (in module twiss.transport)": [[7, "twiss.transport.lb_transport"]], "momenta() (in module twiss.transport)": [[7, "twiss.transport.momenta"]], "transport() (in module twiss.transport)": [[7, "twiss.transport.transport"]], "twiss.transport": [[7, "module-twiss.transport"]], "wolski_transport() (in module twiss.transport)": [[7, "twiss.transport.wolski_transport"]], "mod() (in module twiss.util)": [[8, "twiss.util.mod"]], "twiss.util": [[8, "module-twiss.util"]], "advance() (in module twiss.wolski)": [[9, "twiss.wolski.advance"]], "is_stable() (in module twiss.wolski)": [[9, "twiss.wolski.is_stable"]], "propagate() (in module twiss.wolski)": [[9, "twiss.wolski.propagate"]], "twiss() (in module twiss.wolski)": [[9, "twiss.wolski.twiss"]], "twiss.wolski": [[9, "module-twiss.wolski"]]}})